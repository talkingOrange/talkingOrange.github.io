---
layout: post
title:  "[포스코DX|ReactJS|14주] 61일차 수업, build & deploy"
date:   2023-11-09
categories: Java
---

# 포스코DX X 비트교육센터 6기 - build & deploy

---

### backend에 mojo 플러그인 설치

- pom.xml

```java

<plugin>
				<groupId>org.codehaus.mojo</groupId>
				<artifactId>exec-maven-plugin</artifactId>
				<version>3.0.0</version>
				<executions>
					<execution>
						<goals>
							<goal>exec</goal>
						</goals>
					</execution>
				</executions>
				<configuration>
					<executable>npm</executable>
					<workingDirectory>../frontend</workingDirectory>
					<arguments>
						<argument>run</argument>
						<argument>build:fe</argument>
					</arguments>
					<environmentVariables>
					</environmentVariables>
				</configuration>
			</plugin>
```


### frontend에 build script 추가하기

```
"build:fe": "npm install && npx webpack --config config/webpack.config.js --mode production",
```

- npm install은 Node.js 프로젝트에서 사용되는 패키지 의존성을 설치하는 명령어
- 여기서 "build:fe"이라는 스크립트를 실행하기 전에 npm install 명령어를 사용하면, 프로젝트에 필요한 패키지들이 설치되어 있지 않다면 먼저 필요한 패키지들을 설치

### backend에 애플리케이션 실행 설정 정의 수정

```
# spring configuration
spring:
   application:
      name: emaillist
   profiles:
      active: development
      
      
---
# common spring boot configuration
spring:
   mvc:
      static-path-pattern: /assets/**
      throw-exception-if-no-handler-found: true
   web:
      resources:
         static-locations: classpath:/assets/

   thymeleaf:
      prefix : classpath:templates/
      check-template-location: true
      mode: HTML5
      suffix : .html
      cache : false

mybatis:
   config-location: classpath:mybatis/configuration.xml

logging:
   pattern:
      console: "%d{HH:mm:ss.SSS} [%thread] %-5level %logger{5} - %msg%n"
   level:
      root: INFO



---
# development profile: spring boot configuration
spring:
   config:
      activate:
         on-profile: development

   devtools:
      livereload:
         enabled: true
                     
   datasource:
      driver-class-name: org.mariadb.jdbc.Driver
      url: jdbc:mariadb://[내 ip주소]:3307/webdb?charset=utf8
      username: webdb
      password: webdb
      hikari:
         minimum-idle: 10
         maximum-pool-size: 20
   
server:
   port: 8080
   servlet:
      context-path: /
      encoding:
         charset: utf-8
         enabled: true
         


---
# production profile: spring boot configuration
spring:
   config:
      activate:
         on-profile: production

   datasource:
      driver-class-name: org.mariadb.jdbc.Driver
      url: jdbc:mariadb://[내 ip주소]:3307/webdb?charset=utf8
      username: webdb
      password: webdb
      hikari:
         minimum-idle: 10
         maximum-pool-size: 20
         
server:
   port: 8088
   servlet:
      context-path: /
      encoding:
         charset: UTF-8
         enabled: true
```



- 터미널에서 해당 명령어로 build success 확인하기.

```
C:\Users\pc\Desktop\poscodx2023\eclipse\react-practices\emaillist\backend> mvn exec:exec clean package
```

- centOS에서 build 해보기

```
// git에서 프로젝트 clone 받기
git clone 주소

// 만약에, 프로젝트 내용이 바뀐다면, git push하고, centOS에 있는 프로젝트를 삭제하고 다시 clone 받기
rm -rf [프로젝트 이름]
git clone 주소
```
