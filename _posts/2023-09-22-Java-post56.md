---
layout: post
title:  "[포스코DX|Spring|7주] 33일차 수업"
date:   2023-09-22
categories: Java
---

# 포스코DX X 비트교육센터 6기 - Spring

---

## validate

input 창에 대한 처리


성공  / 실패 (리다이랙션)

바인딩 결과를 넘겨주는 과정이 필요함.

```java

	@RequestMapping(value="/join", method=RequestMethod.POST)
	public String join(@Valid UserVo userVo, BindingResult result, Model model) {
		if(result.hasErrors()) {
			model.addAllAttributes(result.getModel());
			return "user/join";
		}
		userService.join(userVo);
		return "redirect:/user/joinsuccess";
	}
```


- pom.xml

```
<!-- validation -->
<dependency>
   <groupId>org.hibernate.validator</groupId>
   <artifactId>hibernate-validator</artifactId>
   <version>6.2.3.Final</version>
</dependency>
```

- UserVo

![image](https://github.com/talkingOrange/talkingOrange.github.io/assets/88815795/bad9ccdc-aab0-4c19-98b8-65a61f6c125d)


(+) 정규표현식: `[0-9a-zA-z]{8-16}`

- 아무 내용없이 가입하기를 누를 경우, join페이지로 redirect되며, 에러를 볼 수 있음. 

```java
	@RequestMapping(value="/join", method=RequestMethod.POST)
	public String join(@Valid UserVo userVo, BindingResult result, Model model) {
		if(result.hasErrors()) {
			System.out.println(result);
			//model.addAllAttributes(result.getModel());
			return "user/join";
		}
		userService.join(userVo);
		return "redirect:/user/joinsuccess";
	}
```

![image](https://github.com/talkingOrange/talkingOrange.github.io/assets/88815795/6c8f4f16-33fd-4b19-a1c7-2d435855145f)

![image](https://github.com/talkingOrange/talkingOrange.github.io/assets/88815795/ac1ec22c-017c-4b6f-a11b-20e97353af39)


(+) 입력폼(JSP) 에서 에러 메세지 출력하기

- UserController.java

```java
@RequestMapping(value="/join", method=RequestMethod.POST)
	public String join(@Valid UserVo userVo, BindingResult result, Model model) {
		if(result.hasErrors()) {
			//List<ObjectError> list =  result.getAllErrors();
			//for(ObjectError error : list) {
			//	System.out.println(error);
			//}
			model.addAllAttributes(result.getModel());
			return "user/join";
		}
		userService.join(userVo);
		return "redirect:/user/joinsuccess";
	}
```

- Join.jsp

![image](https://github.com/talkingOrange/talkingOrange.github.io/assets/88815795/98921977-d409-4fec-adae-bea1c23ae9d1)


```java
<spring:hasBindErrors name="userVo">
						<c:if test="${errors.hasFieldErrors('name') }">
					 	${errors.getFieldError("name").defaultMessage }
						</c:if>
					</spring:hasBindErrors>
```
