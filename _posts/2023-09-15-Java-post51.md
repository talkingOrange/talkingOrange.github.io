---
layout: post
title:  "[포스코DX|Spring|6주] 28일차 수업"
date:   2023-09-15
categories: Java
---

# 포스코DX X 비트교육센터 6기 - Spring

---

## mapping 방법

- main에서 multy url 사용하기

```java
package com.poscodx.hellospring.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
public class MainController {

	@ResponseBody
	@RequestMapping({"/", "/main", "/board/write"} )
	public String main() {
		return "MainController.main()";
	}
}
```


- `@RequestMapping("/guestbook/*")` 이렇게 url을 주면, 하위의 함수 이름으로 불러올 수 있음.

```url
package com.poscodx.hellospring.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

/**
 * @RequestMapping 클래스 단독 매핑
 * Spring MVC 4.X에서만 지원한다!
 */
@Controller
@RequestMapping("/guestbook/*")
public class GuestbookController {
	
	@ResponseBody
	@RequestMapping
	public String list() {
		return "GuestbookController.list()";
	}

	@ResponseBody
	@RequestMapping
	public String delete() {
		return "GuestbookController.delete()";
	}
}
```

But, 이는 스프링 MVC 버전 4에서만 지원하기 때문에, 지금 실습 환경에서는 에러가 발생함.


- 메서드 단독 매핑

```java
package com.poscodx.hellospring.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

/**
 * @RequestMapping 메서드 단독 매핑
 */
@Controller
public class BoardController {

	@ResponseBody
	@RequestMapping("/board/write")
	public String write() {
		return "BoardController.write()";
	}

	@ResponseBody
	@RequestMapping("/board/view")
	public String view(Long no) {
		return "BoardController.write(" + no + ")";
	}
}

```


![image](https://github.com/talkingOrange/talkingOrange.github.io/assets/88815795/f2ddeff1-0f84-4de4-b3dd-1c02bbd926c4)


- [ 강추 ] class + method 매핑

```java
package com.poscodx.hellospring.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;

/**
 * @RequestMapping 클래스 + 메서드 매핑
 *
 *  강추
 *
 */

@RequestMapping("/user")
@Controller
public class UserController {

	@RequestMapping("/joinform")
	public String joinform() {
		return "/WEB-INF/views/joinform.jsp";

	}

}

```

![image](https://github.com/talkingOrange/talkingOrange.github.io/assets/88815795/f1afc000-8d1c-47b7-b375-e37164ddd233)


- 변수 url의 다른 스타일

```java
// /board/view/10
	@ResponseBody
	@RequestMapping("/board/view/{no}")
	public String view1(@PathVariable("no") Long no) {
		return "BoardController.write(" + no + ")";
	}

	// /board/view?no=10
	@ResponseBody
	@RequestMapping("/board/view")
	public String view2(Long no) {
		return "BoardController.write(" + no + ")";
	}
```



![image](https://github.com/talkingOrange/talkingOrange.github.io/assets/88815795/03c0642a-419b-48d0-bbb1-d299c4d066fe)



- joinform과 join...

> joinform.jsp

```html
<form id="join-form" name="joinForm" method="post" action="${pageContext.request.contextPath }/user/join">
```

![image](https://github.com/talkingOrange/talkingOrange.github.io/assets/88815795/d8f8be09-062d-4037-b9af-eb75a97c80b1)



- joinform이라는 이름이 안 좋 다!!

```java
@RequestMapping("/user")
@Controller
public class UserController {

	@RequestMapping(value="/join", method=RequestMethod.GET)
	public String joinform() {
		return "/WEB-INF/views/join.jsp";
	}
	
	@RequestMapping(value="/join", method=RequestMethod.POST)
	public String join(UserVo userVo) {
		System.out.println("UserController.join(): UserDao.insert("+ userVo+")");
		return "redirect:/";
	}
}

```

![image](https://github.com/talkingOrange/talkingOrange.github.io/assets/88815795/8087b8f5-f0d2-4da0-9e91-62d3f8135fe8)


- url param 명과 변수명을 다르게 하기.

```java
	@ResponseBody
	@RequestMapping("/update")	
	public String update(@RequestParam("n") String name) {
		return "UserController.update(" + name +")";
	}
```

![image](https://github.com/talkingOrange/talkingOrange.github.io/assets/88815795/fd902f16-2568-4400-a072-4b6c6d0082b2)


+) 만일 n이라는 이름의 URL 파라미터가 없으면 400 bad request 에러가 난다. 

이 문제를 해결하기 위해서는, 

```java
@ResponseBody
	@RequestMapping("/update2")	
	public String update2(@RequestParam(value="n", required=false, defaultValue="") String name) {
		
		return "UserController.update(" + name +")";
	}
```

required를 통해 null값이 들어와도 에러가 안나도록 막아주며, defaultValue를 통해 null이 아니라 "" 값이 들어오도록한다.

![image](https://github.com/talkingOrange/talkingOrange.github.io/assets/88815795/9a0351c4-db53-4cdb-baad-4381db898402)


```java
@ResponseBody
	@RequestMapping("/list")
	public String list(@RequestParam(value="p", required=true, defaultValue="1") int pageNo) {
		return "UserController.update(" + pageNo + ")";
	}
```


