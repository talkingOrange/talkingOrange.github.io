---
layout: post
title:  "[포스코DX|리눅스|3주] 12일차 수업"
date:   2023-08-24
categories: Java
---
# 포스코DX X 비트교육센터 6기 - 리눅스

--- 

### 유저 생성하기

```sh
[root@localhost ~]# useradd userl
[root@localhost ~]# cd /home
[root@localhost home]# ls -l
합계 0
drwx------. 2 userl     userl 62  8월 24 09:09 userl
drwx------. 2 webmaster wheel 83  8월 23 14:02 webmaster
```

```sh
[root@localhost home]# useradd -g users user2
[root@localhost home]# ls -l
합계 0
drwx------. 2 user2     users 62  8월 24 09:16 user2
drwx------. 2 userl     userl 62  8월 24 09:09 userl
drwx------. 2 webmaster wheel 83  8월 23 14:02 webmaster
[root@localhost home]# cat /etc/passwd
```

* 홈 디렉터리가 안 생기는.

```sh
[root@localhost home]# useradd -M user3
[root@localhost home]# ls -l
합계 0
drwx------. 2 user2     users 62  8월 24 09:16 user2
drwx------. 2 userl     userl 62  8월 24 09:09 userl
drwx------. 2 webmaster wheel 83  8월 23 14:02 webmaster

```


- useradd : 순수하게 '계정만' 생성해주고, 기본 쉘인 sh가 할당된다. 홈 디렉터리나 비밀번호 등은 따로 설정이 필요하다.
- adduser : 계정 생성 시 비밀번호와 사용자의 기타 정보를 입력받는다. 옵션을 통해 기본 쉘이나 로그인 옵션 등도 설정할 수 있다. 홈 디렉토리도 자동 생성된다.


* userdel은 로그인은 안되지만, 아예 삭제는 아님.  

> 명령

```
[root@localhost home]# userdel userl
userdel: user userl is currently used by process 7628
[root@localhost home]# ls -l
합계 0
drwx------. 2 user2     users 62  8월 24 09:16 user2
drwx------. 2 userl     userl 62  8월 24 09:09 userl
drwx------. 2 webmaster wheel 83  8월 23 14:02 webmaster
```

> 지우려면

```
[root@localhost home]# rm -rf userl
[root@localhost home]# ls -l
합계 0
```

> 지워진 것과 안 지워진 것.

``` console  
[root@localhost home]# cat /etc/shadow
root:$6$bOWj8.Cb27AiBxr5$5C//G3eaILwjtMvCXDjslnOzPaBfUc9vDXvSFgvWpzxQ7ZcL0q/trwhEvw8xzhLw9jVI5Y4aalxu5ydPoM6n51::0:99999:7:::
bin:*:17110:0:99999:7:::
daemon:*:17110:0:99999:7:::
adm:*:17110:0:99999:7:::
lp:*:17110:0:99999:7:::
sync:*:17110:0:99999:7:::
shutdown:*:17110:0:99999:7:::
halt:*:17110:0:99999:7:::
mail:*:17110:0:99999:7:::
operator:*:17110:0:99999:7:::
games:*:17110:0:99999:7:::
ftp:*:17110:0:99999:7:::
nobody:*:17110:0:99999:7:::
systemd-bus-proxy:!!:19592::::::
systemd-network:!!:19592::::::
dbus:!!:19592::::::
polkitd:!!:19592::::::
tss:!!:19592::::::
sshd:!!:19592::::::
postfix:!!:19592::::::
chrony:!!:19592::::::
webmaster:$6$yvfHa31b$DKb7iFNG8WWnug6K148zvGtYwYJf9O1cC3mL0aK9LTOh0GYdHC/J6a7AtNIowZ5vmgXY8w4TeNVO/.Fkfczqu1:19592:0:99999:7:::
userl:$6$/vzrWrLO$K6Zf.x2f7ucLAJReoz1aOehEjhrcPuHjugvvFnlT/s8MqJmmzGVWDs/47AoT3/fD6qgvakOqVb2ztzgS4Jupm1:19593:0:99999:7:::
user2:!!:19593:0:99999:7:::
user3:!!:19593:0:99999:7:::

```

```console
[root@localhost home]# cat /etc/passwd
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin
adm:x:3:4:adm:/var/adm:/sbin/nologin
lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin
sync:x:5:0:sync:/sbin:/bin/sync
shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
halt:x:7:0:halt:/sbin:/sbin/halt
mail:x:8:12:mail:/var/spool/mail:/sbin/nologin
operator:x:11:0:operator:/root:/sbin/nologin
games:x:12:100:games:/usr/games:/sbin/nologin
ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin
nobody:x:99:99:Nobody:/:/sbin/nologin
systemd-bus-proxy:x:999:998:systemd Bus Proxy:/:/sbin/nologin
systemd-network:x:192:192:systemd Network Management:/:/sbin/nologin
dbus:x:81:81:System message bus:/:/sbin/nologin
polkitd:x:998:997:User for polkitd:/:/sbin/nologin
tss:x:59:59:Account used by the trousers package to sandbox the tcsd daemon:/dev/null:/sbin/nologin
sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin
postfix:x:89:89::/var/spool/postfix:/sbin/nologin
chrony:x:997:995::/var/lib/chrony:/sbin/nologin
webmaster:x:1000:10::/home/webmaster:/bin/bash
userl:x:1001:1001::/home/userl:/bin/bash
user2:x:1002:100::/home/user2:/bin/bash
user3:x:1003:1003::/home/user3:/bin/bash

```

- 완전 계정 삭제하기

```
[root@localhost home]# userdel -r user2
[root@localhost home]# ls -l
합계 0
drwx------. 2 userl     userl 62  8월 24 09:09 userl
drwx------. 2 webmaster wheel 83  8월 23 14:02 webmaster

```

### 그룹 만들기

```sh
[root@localhost home]# groupadd group1
[root@localhost home]# cat /etc/group
root:x:0:
bin:x:1:
daemon:x:2:
sys:x:3:
adm:x:4:
tty:x:5:
disk:x:6:
lp:x:7:
mem:x:8:
kmem:x:9:
wheel:x:10:
cdrom:x:11:
mail:x:12:postfix
man:x:15:
dialout:x:18:
floppy:x:19:
games:x:20:
tape:x:30:
video:x:39:
ftp:x:50:
lock:x:54:
audio:x:63:
nobody:x:99:
users:x:100:
utmp:x:22:
utempter:x:35:
input:x:999:
systemd-journal:x:190:
systemd-bus-proxy:x:998:
systemd-network:x:192:
dbus:x:81:
polkitd:x:997:
ssh_keys:x:996:
dip:x:40:
tss:x:59:
sshd:x:74:
postdrop:x:90:
postfix:x:89:
chrony:x:995:
userl:x:1001:
group1:x:1002:
```


> 그룹 삭제하기

```sh
[root@localhost home]# groupdel group1
[root@localhost home]# groupdel group1
groupdel: 'group1' 그룹이 없습니다
[root@localhost home]# cat /etc/group
root:x:0:
bin:x:1:
daemon:x:2:
sys:x:3:
adm:x:4:
tty:x:5:
disk:x:6:
lp:x:7:
mem:x:8:
kmem:x:9:
wheel:x:10:
cdrom:x:11:
mail:x:12:postfix
man:x:15:
dialout:x:18:
floppy:x:19:
games:x:20:
tape:x:30:
video:x:39:
ftp:x:50:
lock:x:54:
audio:x:63:
nobody:x:99:
users:x:100:
utmp:x:22:
utempter:x:35:
input:x:999:
systemd-journal:x:190:
systemd-bus-proxy:x:998:
systemd-network:x:192:
dbus:x:81:
polkitd:x:997:
ssh_keys:x:996:
dip:x:40:
tss:x:59:
sshd:x:74:
postdrop:x:90:
postfix:x:89:
chrony:x:995:
userl:x:1001:
```

### 루트로 돌아가기

```
[root@localhost home]# exit
logout
[webmaster@localhost ~]$ 

```

### 완전히 root계정으로 돌아가기.

su root 하면, 옛날 환경 변수가 유지된다.

ex) [root@localhost webmaster] 이렇게

그래서 환경변수도 완전히 바꾸려면, 아래와 같이.

```
[webmaster@localhost ~]$ su - root
암호:
마지막 로그인: 목  8월 24 09:39:55 KST 2023 일시 pts/0
[root@localhost ~]# 
```

### 루트 -> 다른 유저로

```
[root@localhost ~]# su - webmaster
마지막 로그인: 목  8월 24 09:05:50 KST 2023 192.168.0.145에서 시작 일시 pts/0
[webmaster@localhost ~]$ 
```

### ls 의 옵션

- ls : 정보 없이 이름만 list
- ls -l : 자세하게 list 소유자, 생성일, 업데이트 정보, 자식 디렉토리 개수 등...
- 

